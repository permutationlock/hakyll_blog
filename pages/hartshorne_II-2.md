---
documentclass: article
title: Hartshorne II.2
geometry: margin=1in
fontsize: 12pt
published: June 16, 2019
header-includes: \usepackage{amsmath,amsthm,amssymb,mathrsfs}\usepackage[all]{xy}
...

**Note.** The following result is necessary for many of the arguments below
to work out correctly. The argument is inspired by Vakil's notes.

**Lemma 0.** Let $X$ be a scheme and $U_1,U_2$ two affine open subsechemes,
$U_1\cong\text{Spec}(A)$ and $U_2\cong\text{Spec}(B)$. Then $U_1\cap U_2$
is covered by open sets $\{V_i\}$ such that each $V_i$ is a basic open set in
both $U_1$ and $U_2$.

<div class="proof">
It suffices to show that each point $x\in U_1\cap U_2$ is contained in such an
open set. Let $x\in U_1\cap U_2$. Suppose that $\text{Spec}(A_f)$ is a basic
open set containing $x$. Pick some $\text{Spec}(B_g)$ such that
$x\in\text{Spec}(B_g)\subset\text{Spec}(A_f)$. Then observe that
$g\in\mathcal{O}_X(U_2)$ so we may restrict and find
$g|_{\text{Spec}(A_f)\cap U_2}=g'/f^r\in A_f$ for some $g',f\in A$.
Thus $\text{Spec}(B_g)=\text{Spec}(A_{fg'})$.
</div>

**2.1.** Let $\varphi:A\to A_f$ be the natural homomorphism given by $a\mapsto
a/1.$ Observe that $\varphi$ induces a bijection between the ideals of $A$ not
containing $f$ and the ideals of $A_f$ via the identification
$\mathfrak{a}\mapsto\varphi(\mathfrak{a})A_f$ with inverse
$\mathfrak{b}\mapsto\varphi^{-1}(\mathfrak{b}).$ This identification also
identifies prime ideals with prime ideals and therefore defines a bijection
$\psi:D(f)\to\text{Spec}(A_f)$. Moreover, by our observations above,
$\psi$ and $\psi^{-1}$ each send closed sets to closed sets. Hence $\psi$ is a
homeomorphism.

It remains to show that we have a morphism
$\psi^{\#}:\mathscr{O}_{\text{Spec}(A_f)}\to\psi_*\mathscr{O}_X|_{D(f)}.$
Observe
that for $g/f^{n}\in A_f$ the set $D(g/f^{n})\subset\text{Spec}(A_f)$ is
equal to $D(g/1)\subset\text{Spec}(A_f)$ and $(A_{f})_{g/f^n}\cong A_{fg}.$
Note $D(g/1)=D(f)$ if $g\in (f).$
The basic open sets of $D(f)$ are precisely the sets $D(g)\cap D(f)$
for $g\in A$ and $D(g)\cap D(f)=D(f)$ when
$g\in (f).$ Thus $\psi$ identifies the basic open sets of $D(f)$ with the basic
open sets of $\text{Spec}(A_f).$ Moreover,
$$
    \mathscr{O}_X|_{D(f)}(D(g))\cong
    A_{fg}\cong\mathscr{O}_{\text{Spec}(A_f)}(D(g/1))
$$
and these isomorphisms are
uniquely determined from the natural isomorphism
$\Gamma(D(f),\mathscr{O}_X|_{D(f)})\cong
\Gamma(\text{Spec}(A_f),\mathscr{O}_{\text{Spec}(A_f)}.$ These isomorphisms
define
$$
    \psi^{\#}(D(g)):\mathscr{O}_{\text{Spec}(A_f)}(D(g/1))\to
    \psi_*(\mathscr{O}_X|_{D(f)})(D(g/1)=\mathscr{O}_X|_{D(f)}(D(g))
$$
and
thus they glue to define $\psi^{\#}(U)$ for all open sets. Since each is an
isomorphism, $\psi^{\#}_{\mathfrak{a}}$ is clearly a local homomorphism of local
rings for each $\mathfrak{a}\in\text{Spec}(A_f).$

**2.2.** Let $\{U_\alpha\}$ be an affine open cover for $X$
with $U_\alpha\cong\text{Spec}(A^\alpha).$ Observe that
$U\cap U_\alpha$ is an open subset of $U_\alpha$ and hence $U\cap
U_\alpha=\bigcup_{\beta} U_{\alpha,\beta}$ such that for each $\beta$ we have
$U_{\alpha,\beta}\cong D(f_{\alpha,\beta})\subseteq\text{Spec}(A_{f_\alpha})$
with $f_{\alpha,\beta}\in A^\alpha.$ From proposition 2.2 we know
$D(f_{\alpha,\beta})\cong\text{Spec}(A^\alpha_{f_{\alpha,\beta}}).$
Therefore $U=\bigcup_{\alpha,\beta}U_{\alpha,\beta}$ and $\{U_{\alpha,\beta}\}$
is an affine open cover of $U.$ Therefore $(U,\mathscr{O}_X|_U)$ is a scheme.

**Lemma 1.** Suppose that $X$ is a topological space, $\mathscr{P}$ is a
presheaf on $X$, $\mathcal{B}$ is a basis for the topology on $X$, and
$\mathscr{P}$ is a $\mathcal{B}$-sheaf. Then $\mathscr{P}^{+}$ is isomorphic to
the sheaf generated by $\mathscr{P}$ as a $\mathcal{B}$-sheaf.
See Eisenbud proposition I-12 and [exercise I-13](/notes/eisenbud_harris.html)
for information on
$\mathcal{B}$-sheaves.

<div class="proof">
It suffices to observe that $f(B):\mathscr{P}(B)\to\mathscr{P}^{+}(B)$ is an
isomorphism for each set $B\in\mathcal{B}.$ Clearly the map $f(B)$ is
surjective for each $B\in\mathcal{B}$ by definition and it
is given by mapping a section
$s\in\mathscr{P}(B)$ to the function $B\to\bigsqcup_{P\in B}\mathscr{P}_P$
given by $P\mapsto s_P$ (see proposition 1.2).

It remains to show that $f(B)$ is injective for each $B.$ Suppose that
$s,t\in\mathscr{P}(B)$ are such that $f(B)(s)=f(B)(t).$ Then $s_P=t_P$ for all
$P\in B.$ Thus for each $P\in B$ there exists an open set $U_P\subset B$
containing $P$ such that $s|_{U_P}=t|_{U_P}.$ Since $\mathcal{B}$ is a basis, we may
pic a basis set $B_P\subset U_P$ containing $P.$ Therefore for each $P\in B$
there exists a basic open set $B_P\in\mathcal{B}$ containing $P$ such that
$s|_{B_P}=t|_{B_P}.$ Therefore $s=t$ since $\mathscr{P}$ is a
$\mathcal{B}$-sheaf.
</div>

**Corollary 2.** Suppose that $X$ is a topological space, $\mathscr{F}$ is a sheaf on
$X,$ and $\mathscr{P}$ is a presheaf on $X$ that forms a $\mathcal{B}$-sheaf on
some basis $\mathcal{B}$ of $X.$ If $f:\mathscr{P}\to\mathscr{F}$ is a map
of $\mathcal{B}$-sheaves (i.e. a collection of maps $f(B)$ for each
$B\in\mathcal{B},$
compatible with restrictions) such that $f(B)$ is an isomorphism for each
$B\in\mathcal{B},$
then there exists a induced map $\mathscr{P}^{+}\to\mathscr{F}$ that is
an isomorphism of
sheaves.

<div class="proof">
Recall that it suffices to define a map of sheaves on a basis. In our
case we have a basis
$\mathcal{B}$ and a collection of compatible isomorphisms
$f(B):\mathscr{P}^{+}(B)\to\mathscr{F}(B)$ for each
$B\in\mathcal{B},$ and therefore define an isomorphism of sheaves
$\mathscr{P}^{+}\to\mathscr{F}.$
</div>

**Lemma 3.** If $\mathscr{P}$ is a presheaf on a topological space $X$ and
$U\subseteq X$ is open, then $(\mathscr{P}^+)|_{U}$ and
$(\mathscr{P}|_U)^+$ are equal as sheaves on $U.$

<div class="proof">
This is immediate from the sheafification construction and the fact that
the stalks of $\mathscr{P}|_U$ and $\mathscr{P}^+|_U$
are the same.
</div>

**Lemma 4.** Suppose that $g:\mathscr{F}\to\mathscr{G}$ and
$h:\mathscr{F}\to\mathscr{H}$ are morphisms of sheaves such that $h$ is
surjective and
$\text{ker}(h)\subseteq\text{ker}(g).$ Then there exists a unique map of
sheaves $f:\mathscr{H}\to\mathscr{G}$ such that $g=f\circ h.$

<div class="proof">
Observe that by
exercise 1.7a we have that
$\mathscr{F}/\text{ker}(g)\cong\text{im}(g)\subseteq\mathscr{G}$ and
$\mathscr{F}/\text{ker}(h)\cong\mathscr{H}.$ Let
$i_1:(\mathscr{F}/\text{ker}(g))^{\text{pre}}
\to\mathscr{F}/\text{ker}(g)$ and
$i_2:(\mathscr{F}/\text{ker}(h))^{\text{pre}}
\to\mathscr{F}/\text{ker}(h)$ be the natural maps from each presheaf kernel to
the corresponding kernel sheaf. Finally, let $h':\mathscr{F}\to
(\mathscr{F}/\text{ker}(g))^{\text{pre}}$ be the intermediate map to the
quotient sheaf.
Since $\text{ker}(h)(U)\subseteq\text{ker}(g)(U)$ for each open set $U,$
there clearly exists a
map of presheaves
$f':(\mathscr{F}/\text{ker}(h))^{\text{pre}}
\to(\mathscr{F}/\text{ker}(g))^{\text{pre}}$
such that $g=i_1 \circ f'\circ h'.$ By the universal property of
sheafification, there exists a map
$f:\mathscr{F}/\text{ker}(h)\to\mathscr{F}/\text{ker}(g)$ such that
$f\circ i_2=i_1\circ f'.$ Therefore $g=f\circ i_2\circ h'=f\circ h.$
</div>

**2.3.a.** Suppose that $U\subseteq X$ is open and $s\in\mathcal{O}_X(U).$
If $s^n=0$ then $s_P^n=0$ for each $P\in U.$ Conversely, if $s_P^n=0$ for some
$P\in U$ then there exists an open neighborhood $V\subseteq U$ such that
$(s|_V)^n=0.$ Therefore a nilpotent section over an open subset exists if and
only if a nilpotent germ exists at a stalk.

**2.3.b.** Let us first show that for any ring $A$ we have
$(\text{Spec}(A))_{red}\cong
\text{Spec}(A_{\text{red}}).$ Let $\mathcal{R}$ be the nilradical of $A$ and
recall that $\mathcal{R}$ is the intersection of all the prime ideals of $A.$
Thus $\mathcal{R}$ is the unique prime ideal contained in all other prime
ideals and if $\mathcal{R}\ne (0)$ then $(0)$ Is not prime.
So natural map $\varphi:A\to A/\mathcal{R}=A_{\text{red}}$ gives a
bijection between the prime ideals of $A.$ By proposition 2.3c we have a map
$f:\text{Spec}(A/\mathcal{R})\to\text{Spec}(A)$ given by
$f(\mathfrak{p})=\varphi^{-1}(\mathfrak{p})$ and
$f^{\#}:\mathcal{O}_{\text{Spec}(A)}\to
f_*\mathcal{O}_{\text{Spec}(A/\mathcal{R})}$ given by localizing $\varphi.$
We also know that
$f(V(\mathfrak{a}))=V(\varphi^{-1}(\mathfrak{a})).$ Thus $f$ is a homeomorphism
by our observations about the relationship between the ideals of $A$ and
$A/\mathcal{R}.$ For each
$D(g)\subset \text{Spec}(A)$ we have
$f^{\#}(D(g)):A_g\to (A/\mathcal{R})_{\varphi(g)}$ and
$(A/\mathcal{R})_{\varphi(g)}=(A_g)_{\text{red}}.$ Thus
$f_*\mathcal{O}_{\text{Spec}(A/\mathcal{R})}(D(f))\cong
\mathcal{O}_{\text{Spec}(A)}(D(f))_{\text{red}}.$

Now let $(\mathcal{O}_{\text{Spec}(A)})_{\text{red}}$ be the presheaf given by
$U\mapsto \mathcal{O}_{\text{Spec}(A)}(U)_{\text{red}}.$ The
restriction maps $(\mathcal{O}_{\text{Spec}(A)})_{\text{red}}(D(f))
\to(\mathcal{O}_{\text{Spec}(A)})_{\text{red}}(D(g))$,
that is $(A_{f})_{\text{red}}\to (A_{g})_{\text{red}},$ for
$\sqrt{(g)}\subset\sqrt{(f)}$ is the map induced by the map $A_f\to A_g.$
Thus $(\mathcal{O}_{\text{Spec}(A)})_{\text{red}}$ forms a $\mathcal{B}$-sheaf
on the basis $\mathcal{B}$ of basic open sets, and in fact it is the same
$\mathcal{B}$-sheaf given by $f_*\mathcal{O}_{\text{Spec}(A/\mathcal{R})}$
above. Thus by corollary $2$ above we have that
$(\mathcal{O}_{\text{Spec}(A)})_{\text{red}}^{+}$ is isomorphic to
$f_*\mathcal{O}_{\text{Spec}(A/\mathcal{R})}.$

Suppose now that $X$ is an arbitrary scheme and $\{U_{\alpha}\}$ is an affine
open cover of $X$ with $U_{\alpha}\cong\text{Spec}(A_\alpha).$ By our work
above we see that
$(U_{\alpha})_{\text{red}}\cong\text{Spec}((A_\alpha)_{\text{red}})$ for each
$\alpha.$ The sheaves $(\mathcal{O}_X|_{U_\alpha})_{\text{red}}$ agree on
affine open sets in their intersections, and thus agree on their
intersections. Therefore they glue to a
sheaf $\mathcal{F}$ on $X$. Moreover,
for each $\alpha$ lemma 3 shows that $\mathcal{F}|_{U_\alpha}$ is equal to
the sheaf
$((\mathcal{O}_X)_{\text{red}})|_{U_\alpha}$ given in the problem statement.
Thus $\mathcal{F}\cong(\mathcal{O}_X)_{\text{red}}.$ The maps of affine
schemes
$$
    (U_\alpha,\mathcal{O}_X)\cong\text{Spec}(A_\alpha)\to\text{Spec}((A_\alpha)_{\text{red}})\cong
    (U_\alpha,(\mathcal{O}_{X})_{\text{red}})
$$
also agree on intersections and hence glue to a map $X\to X_{\text{red}}.$
The map $X\to X_{\text{red}}$ is a homeomorphism as it is a homeomorphism on
each $U_\alpha.$

**2.3.c.** 
We define the morphism $g:X\to Y_{\text{red}}$ by
$g(\mathfrak{p})=h^{-1}(f(\mathfrak{p}))$, where
$h:Y_{\text{red}}\to Y$ is the morphism from part (b). Note that $h$ is a
homeomorphism by part (b), so $g$ makes sense as function and is a
continuous map of topological spaces.
$$
\xymatrix{
    X\ar[r]^{f}\ar[dr]_{g} & Y\\
     & Y_{\text{red}} \ar[u]^{h}
}
$$
To simplify notation let us identify the topological
spaces $|Y|$ and $|Y_{\text{red}}|$ so the map $h:Y\to Y_{\text{red}}$
is the identity as a map of topological spaces and the corresponding sheaf map
$h^{\#}:\mathcal{O}_{Y}\to(\mathscr{O}_Y)_{\text{red}}$ is the natural map from
part b.
We also have the map $f^{\#}:\mathcal{O}_Y\to f_*(\mathcal{O}_X)$ given by the
morphism $f.$

To complete our construction of a morphism $g$ with the desired properties
it suffices to show that there exists
a pullback map $g^{\#}:\mathscr{O}_{Y_{\text{red}}}\to g^*\mathscr{O}_X$ such
that $f^{\#}=g^{\#}\circ h^{\#}.$
Observe that we have the following pullback morphisms.
$$
\xymatrix{
    \mathscr{O}_{Y} \ar[d]_{h^{\#}}\ar[dr]^{f^{\#}}
        & \\
    (\mathscr{O}_{Y})_{\text{red}} \ar[r]_{g^{\#}}
        & f_*\mathscr{O}_X.
}
$$
Moreover, since $\mathscr{O}_X$ is reduced, $f_*\mathscr{O}_X$ is
reduced. So the kernel of $f^{\#}$ must contain the kernel of $h^{\#}.$
Thus by lemma 4 above there exists a morphism
$g^{\#}:(\mathscr{O}_{Y})_{\text{red}}\to f_*\mathscr{O}_X$ such that $f^{\#}=
g^{\#}\circ h^{\#}.$

It remains to observe that $g^{\#}$ is a morphism of
locally ringed spaces. Observe that for each $P\in Y_{\text{red}}$ we have
that the map
$h^{\#}_h(P):\mathscr{O}_{Y,h(P)}\to((\mathscr{O}_{Y})_{\text{red}})_P$ is
surjective.
Moreover, $(h^{\#})^{-1}_{h(P)}(\mathfrak{m}_{P})=\mathfrak{m}_{h(P)}.$
Now let $P\in X.$ Since $f^{\#}$ is a map of locally ringed spaces we have
$(f^{\#}_{f(P)})^{-1}(\mathfrak{m}_{P})=\mathfrak{m}_{h(P)}.$ Note that by our
identifiaction $|Y|=|Y_{\text{red}}|$, i.e., the fact that $h$ is the identity
and $h(g(P))=f(P),$
we have that
$f^{\#}_{f(P)}=h^{\#}_{f(P)}\circ g^{\#}_{g(P)}.$ Since $h^{\#}_{f(P)}$ is
surjective we have $h^{\#}_{f(P)}((h^{\#}_{f(P)})^{-1}(S))=S$ for any set
$S.$ Therefore
$$
    \begin{aligned}[t]
    \mathfrak{m}_{g(P)} &=
    h^{\#}_{f(P)}((h^{\#}_{f(P)})^{-1}(\mathfrak{m}_{g(P)}))\\
    &= h^{\#}_{f(P)}(\mathfrak{m}_{f(P)})\\
    &=
    h^{\#}_{f(P)}((h^{\#}_{f(P)})^{-1}((g^{\#}_{g(P)})^{-1}(\mathfrak{m}_P)))\\
        &= (g^{\#}_{g(P)})^{-1}(\mathfrak{m}_P).
    \end{aligned}
$$

**2.4.** Let us first show the result for affine schemes (this is actually
already done in Hartshorne in proposition 2.3c).

Suppose that $\varphi:A\to B$ is a ring homomorphism. Then we may define a map
$f:\text{Spec}(B)\to\text{Spec}(A)$ by
$\mathfrak{p}\mapsto\varphi^{-1}(\mathfrak{p}).$ Observe that
$f^{-1}(V(\mathfrak{a}))=V(\varphi(\mathfrak{a}))$ so $f$ is continuous.
Observe that for $D(g)\subset\text{Spec}(A)$ we have
$\mathscr{O}_{\text{Spec}(A)}(D(g))\cong A_f.$ Moreover,
$$
    \begin{aligned}[t]
        f_*\mathscr{O}_{\text{Spec}(B)}(D(g))
            &=\mathscr{O}_{\text{Spec}(B)}(f^{-1}(D(g))\\
            &=\mathscr{O}_{\text{Spec}(B)}(D(\varphi(g)))\\
            &\cong B_{\varphi(g)}.
    \end{aligned}
$$
We therefore define $f^{\#}(D_f):A_f\to B_{\varphi(g)}$ to be the map induced
by $\varphi:A\to B.$ These glue to define a morphism
$f^{\#}:\mathscr{O}_{\text{Spec}(A)}\to f_*\mathscr{O}_{\text{Spec}(B)}$ with
$f^{\#}(\text{Spec}(A))=\varphi.$

In order to show that $\varphi$ defines a morphism of schemes
it remains to show that
$f^{\#}_{f(\mathfrak{p})}:\mathscr{O}_{\text{Spec}(A),f(\mathfrak{p})}\to
\mathscr{O}_{\text{Spec}(B),\mathfrak{p}}$ is a local homomorphism of local
rings for each prime ideal $\mathfrak{p}\subseteq B.$ Observe that
$\mathscr{O}_{\text{Spec}(A),f(\mathfrak{p})}\cong A_{\varphi^{-1}(\mathfrak{p})},$
$\mathscr{O}_{\text{Spec}(B),\mathfrak{p}}\cong B_{\mathfrak{p}},$ and
$f^{\#}_{f(\mathfrak{p})}:A_{\varphi^{-1}(\mathfrak{p})}\to B_{\mathfrak{p}}$
is given by $s/t\mapsto\varphi(s)/\varphi(t).$ Thus
$$
    \begin{aligned}[t]
    (f^{\#}_{f(\mathfrak{p})})^{-1}(\mathfrak{m}_{\mathfrak{p}})&=
        \{s/t\in A_{\varphi^{-1}(\mathfrak{p})} \, : \,
        \varphi(s)/\varphi(t)\in\mathfrak{m}_{\mathfrak{p}}\}\\
        &=\{s/t\in A_{\varphi^{-1}(\mathfrak{p})} \, : \,
            s\in\varphi^{-1}(\mathfrak{p})\}\\
        &=\mathfrak{m}_{\varphi^{-1}(\mathfrak{p})}.
    \end{aligned}
$$
So $f^{\#}_{f(\mathfrak{p})}$ is a local homomorphism of local rings for each
$\mathfrak{p}\in\text{Spec}(B)$ and $f^{\#}$ is a morphism of schemes.

Suppose conversely that $f:\text{Spec}(B)\to\text{Spec}(A)$ is a morphism of
schemes. The first part of our work above shows that the homomorphism
$f^{\#}(\text{Spec}(A)):A\to B$ determines the morphism $f^{\#}.$ Moreover,
since $f^{\#}$ is a morphism of locally ringed spaces we must have
$(f^{\#}_{f(\mathfrak{p})})^{-1}(\mathfrak{m}_{\mathfrak{p}})
=\mathfrak{m}_{f({\mathfrak{p}})}.$ But the map
$f^{\#}_{f(\mathfrak{p})}:A_{f(\mathfrak{p})}\to B_{\mathfrak{p}}$
is just the localization of the global map
$f^{\#}(\text{Spec}(A)):A\to B$ at $f(\mathfrak{p}).$ Therefore
$f^{\#}(\text{Spec}(A))^{-1}(\mathfrak{p})=f(\mathfrak{p}).$
Thus the map $f$ is also determined by the homomorphism
$f^{\#}(\text{Spec}(A)).$ Hence there is a
bijection
$$
    \text{Hom}(\text{Spec}(B),\text{Spec}(A))\cong\text{Hom}(A,B).
$$

Now suppose that $X$ is an arbitrary scheme and
$\varphi:A\to\Gamma(X,\mathscr{O}_X)$ is a homomorphism.
Let $\{U_\alpha\}$ be an affine open cover of $X.$ The map
$\varphi:A\to\Gamma(X,\mathscr{O}_X)$ composed with the
restriction map
$\text{res}_{X,U_\alpha}:\Gamma(X,\mathscr{O}_X)\to\Gamma(U_\alpha,\mathscr{O}_X)$
is a ring homomorphism $\text{res}_{X,U_\alpha}\circ\varphi:A\to\Gamma(U_\alpha,
\mathscr{O}_X).$ Therefore $\text{res}_{X,U_\alpha}\circ\varphi$
determines a unique morphism of affine schemes
$f_\alpha:U_\alpha\to\text{Spec}(A).$
Now let $\alpha,\beta$ be distinct indexes. We observe that $f_\alpha|_{U_\alpha\cap
U_\beta}=f_\beta|_{U_\alpha\cap U_\beta}$ because for each affine open set
$V\subset U_\alpha\cap U_\beta$ we have
$(f_\alpha|_V)^{\#}(\text{Spec}(A))=\text{res}_{X,V}\circ\varphi$,
$(f_\beta|_V)^{\#}(\text{Spec}(A))=\text{res}_{X,V}\circ\varphi$,
and we know that since $V$ is affine
these ring homomorphisms
uniquely
determine $f_\alpha|_V$ and $f_\beta|_V.$ Thus the $f_\alpha$ glue
to a morphism of schemes $f:X\to\text{Spec}(A)$ corresponding to
the homomorphism $\varphi.$

The argument above also shows that any morphism $f:X\to\text{Spec}(A)$ is determined
by $f^{\#}(\text{Spec}(A)):A\to\Gamma(X,\mathscr{O}_X)$ since each morphism
of affine schemes
$f|_{U_\alpha}$ is determined by $\text{res}_{X,U_\alpha}\circ
f^{\#}(\text{Spec}(A)).$ Thus there is a bijection
$$
    \text{Hom}(X,\text{Spec}(A))\cong\text{Hom}(A,\Gamma(X,\mathcal{O}_X)).
$$

**2.5.** We see that $\text{Spec}(\mathbb{Z})=\{(0)\}\cup\{(p) \, : \, p
\text{ prime}\}.$ Note that each point is closed since $\mathbb{Z}$ is a P.I.D
and prime ideals are maximal. We also find that
$(0)$ has residue field $\mathbb{Q}$, and for each prime $p$ the point
$(p)$ has residue field $\mathbb{F}_p.$

Observe that for every scheme $X$ there is a unique map from
$\mathbb{Z}\to\Gamma(X,\mathscr{O}_X).$ Therefore by exercise 2.4 there exists
a unique map $X\to\text{Spec}(\mathbb{Z}).$ So $\text{Spec}(\mathbb{Z})$ is the
final object in the category of schemes.

**2.6.** Observe that $\text{Spec}(0)=\emptyset$ as there are no proper ideals.
Thus there is a unique map of topological spaces $f:\text{Spec}(0)\to X$ for
every scheme $X$: the empty map. We see that we may naturally define
$f^{\#}(U):\mathscr{O}_X(U)\to
f_*\mathscr{O}_{\text{Spec}(0)}(U)=0$ as the zero map. Thus $(f,f^{\#})$ is a
map of schemes.

Now if $f:X\to\text{Spec}(0)$ is a map of schemes then we must have
$|X|=\emptyset.$ Therefore there is only one open set and as $X$ is a scheme
it must be affine, i.e., $X=\text{Spec}(R)$ with $R$ a commutative ring with no
prime ideals. A nonzero commutative ring with 1 always has a prime ideal, thus
$R=0$ and $X=\text{Spec}(0).$

**2.7.** Observe that $\text{Spec}(K)=\{(0)\}.$

Suppose that $f:\text{Spec}(K)\to X$ is a map of schemes with
$f((0))=x.$ Then $f_x^{\#}:\mathscr{O}_{X,p}\to K$ satisfies
$(f_x^{\#})^{-1}((0))=\mathfrak{m}_x.$ So $f_x^{\#}$ descends to an injective
map of fields
$k(x)\hookrightarrow K.$ Observe that $f^{-1}(U)=\emptyset$ if $x\not\in U$ and
$f^{-1}(U)=\text{Spec}(K)$ otherwise. Therefore the image of a section $s$
under the map
$f^{\#}(U):\mathscr{O}_X(U)\to f_*\mathscr{O}_{\text{Spec}(k)}(U)$ is
determined by the stalk $s_x.$ So the map $f_x^{\#}$ determines the entire map
of sheaves and, together with the choice of point $x$, the map of schemes.

Our observations above in fact tell us exactly how to determine a map of
schemes $f:\text{Spec}(K)\to X$ given any point $x\in X$ and any inclusion
$k(x)\hookrightarrow K.$

**2.8.** Observe that $\text{Spec}(k[\varepsilon]/\epsilon^2)=\{(\varepsilon)\}.$

Suppose that $f:\text{Spec}(k[\varepsilon]/\varepsilon^2)\to X$ is a
map of $k$-schemes. Let $x=f((\varepsilon)).$ Observe that
$(k[\varepsilon]/\varepsilon^2)_(\varepsilon)=k[\varepsilon]/\varepsilon^2$
since every element not in $(\varepsilon)$ is already invertible. Therefore
$f^{\#}_x:\mathscr{O}_{X,x}\to k[\varepsilon]/\varepsilon^2$ descends to an inclusion
$k(x)\hookrightarrow k$ that is a $k$-algebra homomorphism. So the map
$k(x)\hookrightarrow k$ is the identity and $k(x)=k.$ By the
requirement that $(f_x^{\#})^{-1}((\varepsilon))=\mathfrak{m}_x$ we see that
$f^{\#}_x(\mathfrak{m}_x^2)\subseteq(\varepsilon^2)=(0).$ So the map $f_x^{\#}$
is determined by a map $\mathfrak{m}_x/\mathfrak{m}_x^2\to (\varepsilon).$
As every element of $(\varepsilon)$ is of the form $c\varepsilon$ for $c\in k,$
this map is in fact determined by a $k$-vector space map
$\mathfrak{m}_x/\mathfrak{m}_x^2\to k.$ Observing that
$f_*\mathscr{O}_{\text{Spec}(k[\varepsilon]/\varepsilon^2)}(U)=0$ if
$x\not\in U,$ and $k[\varepsilon]/\varepsilon^2$ otherwise, we see that
$f^{\#}(U)$ is determined by the map of stalks $f_x^{\#}$ just as in exercise
2.7 above.

Conversely, given a point $x$ with $k(x)=k$ and a $k$-vector space
map $\varphi:\mathfrak{m}_x/\mathfrak{m}_x^2\to k$ we may define a map
$f^{\#}_x:\mathscr{O}_X\to k[\varepsilon]/\varepsilon^2$ as follows. For each
$a\in\mathscr{O}_X$ we define $a_0\in k$ to be the image of $a$ under the
residue map
$\mathscr{O}_X\to k(x)$ and $a_1\in k$ to be the image of
the class $\overline{a-a_0}\in\mathfrak{m}_x/\mathfrak{m}_x^2$ under the
map $\varphi.$ We define $f^{\#}_x(a)=a_0+a_1.$
Observe that $a-a_1-a_0\in\mathfrak{m}_x^2$ and thus maps to $0$
under this map. Moreover, if $a,b\in\mathscr{O}_x$ then since the maps
$a\mapsto a_0$ and $a\mapsto a_1$ are $k$-vector space homomorphisms we find
that $f_x^{\#}$ is a well defined $k$-algebra homomorphism,
i.e., $(ab)_i=a_ib_i,$ $(a+b)_i=a_i+b_i.$ Therefore we get a well defined map
of schemes.

**Lemma 5.** If $\mathfrak{a}$ is an ideal in a ring $A$, then
$\sqrt{\mathfrak{a}}$ is the intersection of all prime ideals containing
$\mathfrak{a}.$

<div class="proof">
Observe that $\sqrt{\mathfrak{a}}$ is the preimage of the nilradical of
$A/\mathfrak{a}$ under the natural map $A\to A/\mathfrak{a}.$ Moreover,
there is a bijection between the prime ideals of $A$ containing $\mathfrak{a}$
and the ideals of $A/\mathfrak{a}.$ Thus the result follows from the fact that
the nilradical of $A/\mathfrak{a}$ is the intersection of all prime ideals.
</div>

**Lemma 6.** For $f\in A$ and $\mathfrak{a}\subseteq A$ an ideal,
$V(\mathfrak{a})\cap D(f)=\emptyset$ if and only if $f\in\sqrt{\mathfrak{a}}.$

<div class="proof">
Suppose that $D(f)\cap V(\mathfrak{a})=\emptyset.$ Then every prime ideal
containing $\mathfrak{a}$ contains $f.$ Hence by lemma 5 above we have
$f\in\sqrt{\mathfrak{a}}.$

Conversely, suppose that $f\in\sqrt{\mathfrak{a}}.$ Then $f^n\in\mathfrak{a}$
and hence $f^n\in\mathfrak{p}$ for every prime ideal
$\mathfrak{p}\supseteq\mathfrak{a}.$ Thus $D(f)\cap V(\mathfrak{a})=\emptyset.$
</div>

**Lemma 7.** A nonempty closed subset $V(\mathfrak{a})\subseteq\text{Spec}(A)$
is irreducible if and only if $\sqrt{\mathfrak{a}}$ is prime.

<div class="proof">
Recall that a topological space is irreducible if and only if the intersection
of every pair of nonempty basic open sets is nonempty. By lemma 6 above
$D(f)\cap V(\mathfrak{a})=\emptyset$ if and only if $f\in\sqrt{\mathfrak{a}}.$
Let $f,g\not\in\sqrt{\mathfrak{a}}.$ Then $fg\in\sqrt{\mathfrak{a}}$ if and
only if $D(fg)\cap V(\mathfrak{a})=\emptyset.$ Hence there exists a pair of
nonempty basic open subsets whose intersection is empty if and only if there
exists a pair $f,g\not\in\sqrt{\mathfrak{a}}$ such that
$fg\in\sqrt{\mathfrak{a}}.$ So $V(\mathfrak{a})$ is irreducible if and only if
$\sqrt{\mathfrak{a}}$ is prime.
</div>

**Lemma 8.** An (non-empty) affine scheme $\text{Spec}(A)$ is irreducible if
and only if
the nilradical of $A$ is prime.

<div class="proof">
Recall that a topological space is irreducible if and only if the
intersection of any two nonempty basic open subsets is
nonempty. Suppose that $D(f),D(g)$
are nonempty basic open subsets of $\text{Spec}(A).$ Then $f,g$ are not
nilpotent. Their intersection $D(fg)=\emptyset$ if and only if $fg$ is
nilpotent. Therefore $\text{Spec}(A)$ is irreducible if and only if the
nilradical of $A$ is prime.
</div>

**2.9.**
Let $\{U_\alpha\}$ be an affine open cover of $X,$ i.e.,
$U_\alpha\cong\text{Spec}(A_\alpha).$ Observe that $Z\cap
U_\alpha$ is an irreducible closed subset of $U_\alpha.$ Therefore by lemma 7
above $Z\cap
U_\alpha= V(\mathfrak{p}_\alpha)\subseteq\text{Spec}(A_\alpha)$ for a unique prime ideal
$\mathfrak{p}_\alpha\subseteq A_\alpha$ as long as $U_\alpha\cap Z\ne\emptyset.$
So $\mathfrak{p}_\alpha$ is a unique
generic point for $Z\cap U_{\alpha}$ in $\text{Spec}(A_\alpha).$
For each $\alpha$ such that $U_\alpha\cap Z\ne\emptyset$ let
$\eta_\alpha$ be the point in $X$
corresponding to $\mathfrak{p}_\alpha.$ By construction the closure
$\overline{\{\eta_\alpha\}}$ in $X$ is some closed subset containing
$U_\alpha\cap Z$ and contained in $Z.$ If $\overline{\{\eta_\alpha\}}\ne Z$
we have $Z=\overline{\{\eta_\alpha\}}\cup (Z\setminus U_\alpha),$ a
contradiction to the assumption that $Z$ was irreducible. Moreover, this
implies that
$\eta_\alpha\in \bigcap_{\beta} (Z\cap U_\beta)$ where the union is taken over all
$\beta$ such that $U_\beta\cap Z\ne\emptyset.$ This follows from the observation that
if $\eta_\alpha\not\in U_\beta$
then $Z=\overline{\{\eta_\alpha\}}\subseteq X\setminus U_\beta,$ so 
$U_\beta\cap Z=\emptyset.$
So for each $\alpha,\beta$ we see
that $\eta_\alpha,\eta_\beta$ are each generic points for $Z\cap U_\alpha.$
Thus $\eta_\alpha=\eta_\beta$ by the uniqueness of the generic point
$\eta_\alpha$ of $Z\cap
U_\alpha$ in $U_\alpha=\text{Spec}(A_\alpha).$

**2.10.** The set $\text{Spec}(\mathbb{R}[x])$ consists of all closed points, one
point for $(x-r)$ for each $r\in\mathbb{R}$ and one point for each $(x^2+r)$ for
each positive $r\in\mathbb{R}.$ The residue fields for the "linear points" are
$\mathbb{R},$ while the residue field of a "quadratic point" $(x^2+r)$ is
$\mathbb{R}[\sqrt{-r}]=\mathbb{C}.$ Topologically one might think of
$\text{Spec}(\mathbb{R})$ as the upper half plane in $\mathbb{C}$ with the
co-finite topology.

The inclusion $\mathbb{R}[x]\hookrightarrow\mathbb{C}[x]$
gives a map $\text{Spec}(\mathbb{C}[x])\to\text{Spec}(\mathbb{R}[x])$ where the
fibers over the points of type $(x^2+r)$ consist of two points given by the
factorization of $x^2+r$ over $\mathbb{C}.$ The set $\text{Spec}(\mathbb{C})$
looks like $\mathbb{C}$ with the co-finite topology since the prime ideals of
$\mathbb{C}[x]$ are precisely the ideals $(x-a)$ for $a\in\mathbb{C}.$

**2.11.** The set $\text{Spec}(\mathbb{F}_p[x])$ consists of all closed points,
one for each irreducible polynomial.

**2.12.**


**2.2.13.a.**
Suppose that $X$ is noetherian. Then $X$ satisfies the descending chain
condition on closed subsets, or equivalently the ascending chain condition
on open subsets. Suppose that $\{U_i\}_{i\in I}$ is an open cover of $X$.
Then subset inclusion gives a partial order on
$A=\{S\subset I \text{ is finite}\}$.
Moreover, for every finite $S\subset I$ we have an open set
$U_S=\bigcup_{i\in S}U_i$ and the a corresponding poset
$Y=\{(U_S, S) : S\in A\}$ with the partial order given by the order on $A$.
The ascending chain condition gives us that
every chain in $Y$ has an upper bound. Thus Zorn's lemma gives us that
there exists a maximal element of $Y$. If this maximal element
$(U_S,S)$ is not such that $U_S=X$ then this is a contradiction to
$(U_S,S)$ being maximal sinc $\{U_i\}_{i\in I}$ covered all of $X$.
Thus $\{U_i\}_{i\in S}$ is a finite subcover.

Suppose conversely that $X$ is quasi-compact. Then given any descending
chian of closed sets 

**2.2.13.b.**
Suppose that $\{U_\alpha=X\setminus V(I_\alpha)\}_{\alpha\in J}$ is an
open cover of $X=\text{Spec}(A)$. Then $\sum_{\alpha\in J}I_\alpha=A$. So
in particular, there exist $a_\alpha$ for each $\alpha\in J'$ for some
subset $J'\subseteq J$ such that $\sum_{\alpha\in J'}a_\alpha=1$. Thus
$\sum_{\alpha\in J'}I_\alpha=1$ and hence $\bigcap_{\alpha\in J'}
V(I_{\alpha})=\emptyset$. So $\{U_{\alpha}\}_{\alpha\in J'}$ is a finite
subcover of our original cover.

To see $\text{Spec}(A)$ is not necessarily noetherian,
pick $A=\mathbb{C}[x_1,x_2,\ldots]$. Then there exists the infinite ascending chain of
prime ideals
$$
    (x_1)\subsetneq (x_1,x_2)\subsetneq (x_1,x_2,x_3)\ldots\subsetneq\ldots.
$$
This gives a
corresponding descending chain of closed subsets
$$
    V((x_1))\supsetneq
V((x_1,x_2))\supsetneq V((x_1,x_2,x_3))\supsetneq\ldots.
$$
Thus $\text{Spec}(A)$ is not
noetherian.

**2.2.13.c.**
Suppose that $A$ is noetherian. Let $V(I_1)\supset
V(I_2)\supset\ldots$ be a descending chain of closed sets. Then $I_1\subset
I_2\subset I_2$ is an ascending chain of ideals. Thus $I_i=I_j$ for all
$i,j\ge N$ for some $N$.

**2.2.13.d.**
Observe that if we have an infinite ascending chain of prime ideals in a
ring $A$, but the ideals are generated by nilpotent elements, then each
ideal in this chain will map to the $(0)$ ideal in $A_{\text{red}}$.
Moreover, we showed in Exercise 2.2.3b that $\text{sp}(\text{Spec}(A))$ is
homeomorphic to
$\text{sp}(\text{Spec}(A_{\text{red}}))=\text{sp}((\text{Spec}(A))_{\text{red}})$.
Thus $\text{sp}(\text{Spec}(A))$ is noetherian if and only if
$\text{sp}(\text{Spec}(A_\text{red}))$ is noetherian.

For an explicit example we can take
$A=\mathbb{C}[x_1,x_2,\ldots]/(x_1^2,x_2^2,\ldots)$. Observe that
$(x_1)\subsetneq (x_1,x_2)\subsetneq\ldots$ but $x_1,x_2,\ldots$ are all
nilpotent in $A$. Thus $A_{\text{red}}=\mathbb{C}$ which is clearly
noetherian, and hence $\text{sp}(\text{Spec}(A))$ is noetherian.

**Lemma 9.** Let $S=\oplus S_n$ be a graded ring. Then the following
statements hold.

 (1) An ideal $I$ of $S$ is generated by its homogeneous elements if and only
    if for every $n\in\mathbb{Z}$ and every $f\in I$ the degree $n$ part of $f$
    is contained in $I$ as well. We say that $I$ is a homogeneous ideal.
 (2) If $I,J\subseteq S$ are homogeneous ideals, then so are $I+J,$ $IJ,$ and
    $I\cap J.$
 (3) A homogeneous ideal $I\subseteq S$ is prime if and only if for every
    homogeneous $a,b\in S,$ the product $ab$ is in $I$ if and only if $a$
    or $b$ is in $I.$

**Lemma 10.** Let $S$ be a graded ring. If $f\in S_+$ is a homogeneous element
then there is a one-to-one correspondence between the prime ideals of
$S_{(f)}$ and the homogeneous prime ideals of $S_f.$

<div class="proof">

</div>

**Lemma 11.** If $S$ is a graded ring and $f,g\in S_+$ are homogeneous, then
$D_+(fg)$ is isomorphic to the affine subset
$D(g^{\text{deg}(f)}f^{-\text{deg}(g)})$ in $D_+(f)=\text{Spec}(S_(f)).$
Therefore $D_+(f)\cap D_+(g)=D_+(fg)$ is a basic affine open subset of both
$D_+(f)$ and $D_+(g).$

**2.14.a.** Suppose that $x\in S^{+}.$ If $x$ is not nilpotent, then there
exists a prime ideal $\mathfrak{p}\subseteq S$ not containing $x$ (since the
nilradical is the intersection of all prime ideals). The homogenization
$\mathfrak{p}^h,$ defined to be the ideal generated by homogeneous elements of
$\mathfrak{p},$ is prime as well (see for example Cox-Little-O'Shea's
undergraduate book). Therefore $\mathfrak{p}^h$ is a prime ideal not containing
$x$ thus $\mathfrak{p}^h\in\text{Proj}(S).$

Conversely, if every element of $S^{+}$ is nilpotent then
$S^{+}$ is contained in every prime ideal of $S.$ Therefore every homogeneous
prime ideal contains the trivial ideal and $\text{Proj}(S)=\emptyset.$

**2.14.b.** Let $(S_+)_h$ be the set of homogeneous elements of $S_+.$
Observe that if $\mathfrak{p}\subseteq T$ is a homogeneous ideal such that
$\mathfrak{p}\not\supseteq\varphi(S_+)$ then there must exist an element
$\varphi(g)\in\mathfrak{p}$ for some $g\in\varphi(S_+).$ Therefore one of the
homogeneous elements of $\varphi(g)$ must not be contained in $\mathfrak{p}.$
So for every ideal $\mathfrak{p}\in U$ there exists a homogeneous element
$g\in (S_+)_h$ such that $\varphi(g)\not\in\mathfrak{p}.$ Therefore
$U=\bigcup_{s\in (S_+)_h}D_+(\varphi(s))$ and $U$ is open.

Now let $g\in(S_+)_h.$ Observe that $\varphi:S\to T$ localizes to a map
$\varphi_g:S_{(g)}\to T_{(\varphi(g))}$ as it preserves degrees. By exercise
$2.4$ these maps define a
collection of morphisms of affine schemes
$$f_g:D_+(\varphi(g))=\text{Spec}(T_{(\varphi(g))})
    \to\text{Spec}(S_{(g)})=D_+(g).
$$
Moreover,
for any $g_1,g_2\in (S_+)_h$ we have
$f_{g_1}|_{D_+(\varphi(g_1g_2))}=f_{g_1g_2}.$ Thus they glue to a morphism of
schemes $f:U\to\text{Proj}(S).$

**2.18.a.** Recall that the nilradical of $A$ is the intersection of all prime
ideals in $A.$ Therefore $f$ is nilpotent if and only if $f$ is contained in
all prime ideals of $A,$ i.e., if and only if $D(f)=\emptyset.$

**2.18.b.** Let $g\in A.$ Then the map $f^{\#}(D(g)):\mathscr{O}_X(D(g))\to
f_*\mathscr{O}_Y(D(g))$ is in fact the map $A_{g}\to B_{\varphi(g)}$ induced by
$\varphi:A\to B.$ Therefore each of these maps is injective and hence $f^{\#}$
is injective as a map of sheaves since it is injective on each basic open set.
